# 数据库索引设计规范

#### 1. 限制单张表上的索引数量，单张表不超过5个

- 5个为建议值，一般列越多索引也越多，根据实际情况
- 索引并不是越多越好，可以提供效率同样可以降低效率
- 禁止给表中的每个列都建立单独的索引

#### 2. Innodb引擎的索引顺序性能
Innodb 是一种索引组织表：索引顺序和数据逻辑顺序一致
- 按照 **主键** 来进行组织顺序，没有主键使用第一个非空，唯一的列作为组织顺序

#### 3. 主键建议

`主键建议`
- 每一个Innodb表都应该有一个`主键`
- 不使用更新频繁的列作为主键，不使用多列作为主键
- 不使用UUID,MD5,HASH,字符串列作为主键
- `建议使用自增ID`作为主键

#### 4. 常用索引建议

`常用索引建议`

-  `SELECT` `UPDATE` `DELETE` 语句`WHERE`从句中的列
-  包含在`ORDER BY`,`GROUP BY`,`DISTINCT` 中的字段
-  多表`JOIN`的关联列

#### 5. 索引列的顺序

- 联合索引中 索引列是按照从左到右的顺序来使用的
- 尽量将主键放在联合索引的最左边
- 尽量将唯一，字段长度小的列放在联合索引的最左边
- 将使用最频繁放在联合索引的最左边

#### 6. 避免建立冗余索引和重复索引

例：
冗余索引 a 在a,b,c三列上都建立索引就是冗余索引`index(a,b,c),index(a,b),c(a)`
重复索引：id为主键，索引，唯一索引`primary key(id), index(id),unique index(id)`

#### 7. 对于频繁的查询优先考虑使用覆盖索引

覆盖索引：就是包含了所有查询字段的索引
- 避免Innodb表进行索引的二次查找
- 可以把随机IO变为顺序IO加快查询效率

#### 8. 尽量使用外键

- `不建议`使用外键约束，但一定在表与表之间的关联键上建立约束
- 外键可用户保证数据的参照完整性，但建议在业务端实现
- 外键会影响父表和子表的写操作从而降低性能

