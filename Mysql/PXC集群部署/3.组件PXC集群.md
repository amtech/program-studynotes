# 组件PXC集群
### 1. 组建前的注意事项
- 尽量控制PXC集群规模
![Mysql](./images/3-1.png)
- 所有PXC节点的硬件配置要相同，因为强一致性，PXC集群同步的速度取决于配置最低的那个节点
![Mysql](./images/3-2.png)
- 只有使用了 INNODB 引擎的数据库才会被同步
- Centos7 因为默认绑定了 mariadb-libs,所以要进行卸载
```bash
yum -y remove maria*
```
- 创建一个3节点的PXC集群（奇数个），默认PXC已经包含了 Precona 的 mysql 数据库,不需要再安装 percona-server
![Mysql](./images/3-3.png)

- PXC依赖的端口号需要开启
![Mysql](./images/3-4.png)

- 关闭 selinux ,设置 /etc/selinux/config 为 disabled

### 2. PXC下载和安装
- 选择要下载的版本:5.6 [点击查看线上下载地址](https://www.percona.com/downloads/)
![Mysql](./images/3-5.png)
- 选择具体的版本号下载
![Mysql](./images/3-6.png)
- 下载依赖包 qpress | [点击查看下载地址](http://www.rpmfind.net/linux/opensuse/tumbleweed/repo/oss/x86_64/qpress-1.1-7.13.x86_64.rpm)
![Mysql](./images/3-7.png)



- **本地RPM包安装**
  [qpress-1.1-7.13.x86_64.rpm包 当前目录下载](./source/qpress-1.1-7.13.x86_64.rpm)
  [Percona-XtraDB-Cluster-5.6.26-25.12-r624ef81-el7-x86_64-bundle.tar包 当前目录下载](./source/Percona-XtraDB-Cluster-5.6.26-25.12-r624ef81-el7-x86_64-bundle.tar)
```bash
# 下载Percona-Server-5.6rpm包 并解压缩
wget https://www.percona.com/downloads/Percona-XtraDB-Cluster-56/Percona-XtraDB-Cluster-5.6.26-25.12/binary/redhat/7/x86_64/Percona-XtraDB-Cluster-5.6.26-25.12-r624ef81-el7-x86_64-bundle.tar
mkdir PXC
tar xvf Percona-XtraDB-Cluster-5.6.26-25.12-r624ef81-el7-x86_64-bundle.tar
cd PXC

# 下载qpress
wget http://www.rpmfind.net/linux/opensuse/tumbleweed/repo/oss/x86_64/qpress-1.1-7.13.x86_64.rpm

# 安装指定的rpm包
yum localinstall ./*.rpm
```

### 3. PXC安装成功后初始化
+ 3.1 修改 my.cnf 文件
```bash
vim /etc/my.cnf


```
